<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Fabricator V1.4.0</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background-color: black; color: white; }
        .container { margin-top: 50px; }
        .button { padding: 10px 20px; margin: 10px; font-size: 18px; cursor: pointer; }
        .button:disabled { opacity: 0.6; cursor: not-allowed; }
        .storage-bar-bg { width: 300px; height: 20px; background: #111; border-radius: 10px; margin: 10px auto; }
        .storage-bar-fill { height: 100%; background: linear-gradient(to right, #16f0b7, #2a35d6); border-radius: 10px; }
        .storage-label { font-size: 14px; }
    </style>
</head>
<body>
    <h1>Cosmic Fabricator V1.4.0</h1>
    <p>Start as a quantum fluctuation and build your own universe!</p>
    
    <div class="container">
        <p>Quantum Energy: <span id="quantumEnergy">0</span></p>
        <button class="button" onclick="generateEnergy()">Generate Quantum Energy</button>
        <button class="button" onclick="upgradeParticleFusion()">Upgrade Particle Fusion (Cost: <span id="upgradeCost">10</span>)</button>
        <button class="button" onclick="unlockDarkMatter()">Unlock Dark Matter (Cost: <span id="darkMatterCost">50</span>)</button>
        <button class="button" onclick="createStar()">Create a Star (Cost: <span id="starCost">100</span>)</button>
        <button class="button" id="dimensionalExpansionBtn" onclick="triggerDimensionalExpansion()">Dimensional Expansion (Cost: 100,000 QE, +50% Storage, 10m)</button>
        <p>Dark Matter: <span id="darkMatter">0</span></p>
        <p>Stars Created: <span id="stars">0</span></p>
        <div class="storage-label">Storage Capacity: <span id="storageCapacity">1,000,000</span></div>
        <div class="storage-bar-bg">
            <div id="storageBar" class="storage-bar-fill" style="width: 100%"></div>
        </div>
    </div>

    <div id="notificationArea" style="position: fixed; top: 20px; right: 20px; max-width: 250px; z-index: 1000;"></div>

    <script>
        let quantumEnergy = 0;
        let fusionLevel = 1;
        let upgradeCost = 10;
        let darkMatter = 0;
        let darkMatterCost = 50;
        let stars = 0;
        let starCost = 100;

        // Storage system
        let baseStorage = 1000000;
        let storageCapacity = baseStorage;
        let storageBoosted = false;
        let storageBoostTimeout = null;

        function generateEnergy() {
            if (quantumEnergy + fusionLevel > storageCapacity) {
                showNotification("Quantum Energy storage full!");
                quantumEnergy = storageCapacity;
            } else {
                quantumEnergy += fusionLevel;
            }
            updateDisplay();
        }

        function upgradeParticleFusion() {
            if (quantumEnergy >= upgradeCost) {
                quantumEnergy -= upgradeCost;
                fusionLevel *= 2;
                upgradeCost = Math.floor(upgradeCost * 2.5);
                updateDisplay();
            } else {
                alert("Not enough Quantum Energy!");
            }
        }

        function unlockDarkMatter() {
            if (quantumEnergy >= darkMatterCost) {
                quantumEnergy -= darkMatterCost;
                darkMatter += 1;
                darkMatterCost = Math.floor(darkMatterCost * 3);
                updateDisplay();
            } else {
                alert("Not enough Quantum Energy!");
            }
        }

        function createStar() {
            if (quantumEnergy >= starCost) {
                quantumEnergy -= starCost;
                stars += 1;
                starCost = Math.floor(starCost * 2);
                updateDisplay();
            } else {
                alert("Not enough Quantum Energy!");
            }
        }

        // Dimensional Expansion activation
        function triggerDimensionalExpansion() {
            if (storageBoosted) {
                showNotification("Dimensional Expansion is already active!");
                return;
            }
            if (quantumEnergy < 100000) {
                showNotification("Not enough Quantum Energy for Dimensional Expansion!");
                return;
            }
            applyDimensionalExpansion();
        }

        function applyDimensionalExpansion() {
            const storageBoost = 0.5; // 50% increased storage
            const duration = 10 * 60 * 1000; // 10 minutes in ms
            quantumEnergy -= 100000;
            storageCapacity = Math.floor(baseStorage * (1 + storageBoost));
            storageBoosted = true;
            document.getElementById("dimensionalExpansionBtn").disabled = true;
            updateDisplay();

            showNotification("Dimensional Expansion activated! Storage capacity increased by 50% for 10 minutes.");

            storageBoostTimeout = setTimeout(() => {
                storageCapacity = baseStorage;
                storageBoosted = false;
                document.getElementById("dimensionalExpansionBtn").disabled = false;
                showNotification("Dimensional Expansion has ended. Storage capacity restored.");
                updateDisplay();
            }, duration);
        }

        // Notification system
        function showNotification(message) {
            const area = document.getElementById("notificationArea");
            const note = document.createElement("div");

            note.innerText = message;
            note.style.background = "rgba(0, 0, 0, 0.8)";
            note.style.color = "white";
            note.style.padding = "10px";
            note.style.marginTop = "10px";
            note.style.borderRadius = "8px";
            note.style.fontSize = "14px";
            note.style.boxShadow = "0 0 10px rgba(255, 255, 255, 0.3)";
            note.style.opacity = "1";
            note.style.transition = "opacity 1s ease";

            area.appendChild(note);

            // Fade out and remove after 4s
            setTimeout(() => {
                note.style.opacity = "0";
                setTimeout(() => area.removeChild(note), 1000);
            }, 4000);
        }

        // Utilities
        function formatNumber(num, digits = 3) {
            if (num === 0) return "0";
            if (num < 1000) return num.toLocaleString();
            let exponent = Math.floor(Math.log10(Math.abs(num)));
            let mantissa = (num / Math.pow(10, exponent)).toFixed(digits);
            return `${mantissa}e${exponent}`;
        }

        function updateDisplay() {
            document.getElementById("quantumEnergy").innerText = formatNumber(quantumEnergy);
            document.getElementById("upgradeCost").innerText = formatNumber(upgradeCost);
            document.getElementById("darkMatter").innerText = formatNumber(darkMatter);
            document.getElementById("darkMatterCost").innerText = formatNumber(darkMatterCost);
            document.getElementById("stars").innerText = formatNumber(stars);
            document.getElementById("starCost").innerText = formatNumber(starCost);
            document.getElementById("storageCapacity").innerText = formatNumber(storageCapacity);

            // Storage bar
            let percent = Math.min(100, (quantumEnergy / storageCapacity) * 100);
            document.getElementById("storageBar").style.width = percent + "%";

            // Enable/disable Dimensional Expansion button
            const btn = document.getElementById("dimensionalExpansionBtn");
            btn.disabled = storageBoosted || quantumEnergy < 100000;
        }

        // Initial display
        updateDisplay();
    </script>
</body>
</html>
